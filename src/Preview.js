import './Preview.css';
import background from './assets/background1.png'
import { useState, useEffect } from 'react';
import { cusineTypes } from './objects';

import { interactiveBill } from './objects';
import Stories from './Stories';
import { styled, Box } from '@mui/system';
import { Modal as BaseModal } from '@mui/base/Modal';
import "slick-carousel/slick/slick.css"; 
import "slick-carousel/slick/slick-theme.css";
import Slider from 'react-slick';


    

function Preview({ place, name, adress, bill, tags, features, cusinePlace, time, photos, phone, menu, descr, link, events }) {
    
    const [open, setOpen] = useState(false);
    const handleOpen = (typ) => {setOpen(true); setModalType(typ)}
    const handleClose = () => setOpen(false);
    const [modalType, setModalType] = useState('')
    // place = JSON.parse(place);

    const cusine = features["–ö—É—Ö–Ω—è"];
    const [billNum, setBillNum] = useState(0);
    const [cusineNum, setCusineNum] = useState(cusine !== undefined && cusine.length > 0 ? cusine[0] === '–µ–≤—Ä–æ–ø–µ–π—Å–∫–∞—è' && ['–¥–æ–º–∞—à–Ω—è—è', '—Å–º–µ—à–∞–Ω–Ω–∞—è', '–≤–µ–≥–µ—Ç–µ—Ä–∏–∞–Ω—Å–∫–∞—è', '–≤–µ–≥–∞–Ω—Å–∫–∞—è', '—à–∞—à–ª—ã–∫', '—Å–ª–∞–≤—è–Ω—Å–∫–∏—Ö –Ω–∞—Ä–æ–¥–æ–≤', '–∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞–ª—å–Ω–∞—è', '—Ö–∞–ª—è–ª—å–Ω–∞—è'].includes(cusine[1]) != true && cusine.length > 1 ? 1 : 0:0);
    // let billPages = ['–¶–µ–Ω–∞', '–°—Ä–µ–¥–Ω–∏–π —Å—á—ë—Ç', '–¶–µ–Ω–∞ –±–æ–∫–∞–ª–∞ –ø–∏–≤–∞', '–¶–µ–Ω–∞ –±–æ–∫–∞–ª–∞ –≤–∏–Ω–∞', '–¶–µ–Ω–∞ —á–∞—à–∫–∏ –∫–∞–ø—É—á–∏–Ω–æ'].map(b => {
    //     return Object.keys(features).map(feat => )
    // })

    /// MANAGING FUCKING TAGS ///

    if (features !== null && tags !== null) {

        // if (features.hasOwnProperty('–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è')) {
        //     if (features.hasOwnProperty('–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –º–µ–Ω—é')) {
        //         let menu_features = features['–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –º–µ–Ω—é']
        //         var newTags = features['–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è']
        //         newTags.push(menu_features)
        //         newTags.push.apply(newTags, tags)

        //         let weights = { '–î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã': '0', '–ï–¥–∞ –Ω–∞–≤—ã–Ω–æ—Å': '1', '–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π': '0', '–õ–µ—Ç–Ω—è—è –≤–µ—Ä–∞–Ω–¥–∞': '4', 'Wi-Fi': '0', '–ö–æ—Ñ–µ —Å —Å–æ–±–æ–π': '2', '–ö—Ä–∞—Ñ—Ç–æ–≤–æ–µ –ø–∏–≤–æ': '2', '–ü—Ä–µ–¥–∑–∞–∫–∞–∑ –æ–Ω–ª–∞–π–Ω': '0', '–ë–∏–∑–Ω–µ—Å-–ª–∞–Ω—á': '1', '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç': '0', '–ó–∞–≤—Ç—Ä–∞–∫': '2', '–ü—Ä–æ–µ–∫—Ç–æ—Ä': '3', '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': '3', '–î–µ—Ç—Å–∫–æ–µ –º–µ–Ω—é': '1', '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏': '4', '–ü–∞—Ä–∫–æ–≤–∫–∞ –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '0', '–î–µ—Ç—Å–∫–∞—è –∫–æ–º–Ω–∞—Ç–∞': '1', '–°–∞–º–æ–≤—ã–≤–æ–∑': '0', '–î–æ—Å—Ç–∞–≤–∫–∞': '0', '–õ–∏—Ñ—Ç': '0', '–¢–∞–Ω—Ü–ø–æ–ª': '4', '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–≤–µ—Ä—å': '0', '–¢—É–∞–ª–µ—Ç –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '0', '–ö–∞—Ä–∞–æ–∫–µ': '4', '–ü–∞–Ω–¥—É—Å': '0', '–ó–∞—Ä—è–¥–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞': '0', 'WC': '0', '–ü–∏—Ç—å–µ–≤–∞—è –≤–æ–¥–∞': '0', '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞': '0', '–û–ø–ª–∞—Ç–∞ —Å—á–µ—Ç–∞ –ø–æ QR-–∫–æ–¥—É': '0', '–ß–∞–π': '1', '–§—É–¥–∫–æ—Ä—Ç': '0', '–ë–∏–ª—å—è—Ä–¥': '3', '–°–∫–∏–¥–∫–∞ –Ω–∞ –µ–¥—É': '0', '–ò–∫–æ—Ä–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω': '0', '–ö–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞': '0', '–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤': '0', '–ü–∞—Ä–∫–æ–≤–∫–∞': '0', '–®–æ—É-–ø—Ä–æ–≥—Ä–∞–º–º–∞': '4', '–§–µ–π—Å-–∫–æ–Ω—Ç—Ä–æ–ª—å': '0', '–†–µ—Å—Ç–æ—Ä–∞–Ω': '1', '–ú–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞': '3', '–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å': '0', '–õ—å–≥–æ—Ç–Ω—ã–µ –±–∏–ª–µ—Ç—ã': '0', '–•–ª–µ–± –∏–∑ —Ç–∞–Ω–¥—ã—Ä–∞': '0', '–ß–∞–π–Ω–∞—è': '1', '–ü–µ—á–∞—Ç—å –Ω–∞ —Ç–æ—Ä—Ç–∞—Ö': '0', '–±–∞—Ä–Ω–∞—è —Å—Ç–æ–π–∫–∞': '2', '–≤–∏–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞': '1', '–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥ –±–∞–Ω–∫–µ—Ç': '0', '–∫—É–ª–∏–Ω–∞—Ä–∏—è': '0', '–º–µ–Ω—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º': '1', 'DJ': '4', '–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞': '0', '—Å–≤–æ—è –ø–µ–∫–∞—Ä–Ω—è': '2', '–Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': '3', '–º–æ–∂–Ω–æ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏': '1', '–∂–∏–≤–∞—è –º—É–∑—ã–∫–∞': '4', '—É—Å—Ç—Ä–∏—á–Ω—ã–π –±–∞—Ä': '1', '–±—Ä–∞–Ω—á–∏': '2', '–¥–µ—Ç—Å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è': '0', '—Ç–∞–Ω—Ü–ø–æ–ª': '4', '–≥—Ä–∏–ª—å': '1', '–¥–æ–º–∞—à–Ω—è—è –µ–¥–∞': '1', '–≤—ã–ø–µ—á–∫–∞': '1', '—à–∞—à–ª—ã–∫–∏': '1', '–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –∫—É—Ö–Ω—è': '0', '–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É –≤–æ–¥—ã': '3', '–±–∏–ª—å—è—Ä–¥': '3', '—Å—É—à–∏ –∏ —Ä–æ–ª–ª—ã': '1', '—É–∑–±–µ–∫—Å–∫–∞—è –µ–¥–∞': '1', '–∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–±–µ–¥—ã': '1', '–≥—Ä—É–∑–∏–Ω—Å–∫–∞—è –µ–¥–∞': '1', '–ø–∏—Ü—Ü–∞': '1', '–º–æ–∂–Ω–æ —Å –Ω–æ—É—Ç–±—É–∫–æ–º': '0', '—Å–ª–∞–¥–æ—Å—Ç–∏': '1', '–∑–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ': '1', '–æ—Å–µ—Ç–∏–Ω—Å–∫–∏–µ –ø–∏—Ä–æ–≥–∏': '1', '–∫–∏—Ç–∞–π—Å–∫–∞—è –µ–¥–∞': '1' }
        //         newTags = newTags.sort((a, b) => parseInt(weights[b]) - parseInt(weights[a]))
        //     }
        //     else {
        //         var newTags = features['–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è']
        //         newTags.push.apply(newTags, tags)

        //         let weights = { '–î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã': '0', '–ï–¥–∞ –Ω–∞–≤—ã–Ω–æ—Å': '1', '–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π': '0', '–õ–µ—Ç–Ω—è—è –≤–µ—Ä–∞–Ω–¥–∞': '4', 'Wi-Fi': '0', '–ö–æ—Ñ–µ —Å —Å–æ–±–æ–π': '2', '–ö—Ä–∞—Ñ—Ç–æ–≤–æ–µ –ø–∏–≤–æ': '2', '–ü—Ä–µ–¥–∑–∞–∫–∞–∑ –æ–Ω–ª–∞–π–Ω': '0', '–ë–∏–∑–Ω–µ—Å-–ª–∞–Ω—á': '1', '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç': '0', '–ó–∞–≤—Ç—Ä–∞–∫': '2', '–ü—Ä–æ–µ–∫—Ç–æ—Ä': '3', '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': '3', '–î–µ—Ç—Å–∫–æ–µ –º–µ–Ω—é': '1', '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏': '4', '–ü–∞—Ä–∫–æ–≤–∫–∞ –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '0', '–î–µ—Ç—Å–∫–∞—è –∫–æ–º–Ω–∞—Ç–∞': '1', '–°–∞–º–æ–≤—ã–≤–æ–∑': '0', '–î–æ—Å—Ç–∞–≤–∫–∞': '0', '–õ–∏—Ñ—Ç': '0', '–¢–∞–Ω—Ü–ø–æ–ª': '4', '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–≤–µ—Ä—å': '0', '–¢—É–∞–ª–µ—Ç –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '0', '–ö–∞—Ä–∞–æ–∫–µ': '4', '–ü–∞–Ω–¥—É—Å': '0', '–ó–∞—Ä—è–¥–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞': '0', 'WC': '0', '–ü–∏—Ç—å–µ–≤–∞—è –≤–æ–¥–∞': '0', '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞': '0', '–û–ø–ª–∞—Ç–∞ —Å—á–µ—Ç–∞ –ø–æ QR-–∫–æ–¥—É': '0', '–ß–∞–π': '1', '–§—É–¥–∫–æ—Ä—Ç': '0', '–ë–∏–ª—å—è—Ä–¥': '3', '–°–∫–∏–¥–∫–∞ –Ω–∞ –µ–¥—É': '0', '–ò–∫–æ—Ä–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω': '0', '–ö–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞': '0', '–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤': '0', '–ü–∞—Ä–∫–æ–≤–∫–∞': '0', '–®–æ—É-–ø—Ä–æ–≥—Ä–∞–º–º–∞': '4', '–§–µ–π—Å-–∫–æ–Ω—Ç—Ä–æ–ª—å': '0', '–†–µ—Å—Ç–æ—Ä–∞–Ω': '1', '–ú–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞': '3', '–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å': '0', '–õ—å–≥–æ—Ç–Ω—ã–µ –±–∏–ª–µ—Ç—ã': '0', '–•–ª–µ–± –∏–∑ —Ç–∞–Ω–¥—ã—Ä–∞': '0', '–ß–∞–π–Ω–∞—è': '1', '–ü–µ—á–∞—Ç—å –Ω–∞ —Ç–æ—Ä—Ç–∞—Ö': '0', '–±–∞—Ä–Ω–∞—è —Å—Ç–æ–π–∫–∞': '2', '–≤–∏–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞': '1', '–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥ –±–∞–Ω–∫–µ—Ç': '0', '–∫—É–ª–∏–Ω–∞—Ä–∏—è': '0', '–º–µ–Ω—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º': '1', 'DJ': '4', '–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞': '0', '—Å–≤–æ—è –ø–µ–∫–∞—Ä–Ω—è': '2', '–Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': '3', '–º–æ–∂–Ω–æ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏': '1', '–∂–∏–≤–∞—è –º—É–∑—ã–∫–∞': '4', '—É—Å—Ç—Ä–∏—á–Ω—ã–π –±–∞—Ä': '1', '–±—Ä–∞–Ω—á–∏': '2', '–¥–µ—Ç—Å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è': '0', '—Ç–∞–Ω—Ü–ø–æ–ª': '4', '–≥—Ä–∏–ª—å': '1', '–¥–æ–º–∞—à–Ω—è—è –µ–¥–∞': '1', '–≤—ã–ø–µ—á–∫–∞': '1', '—à–∞—à–ª—ã–∫–∏': '1', '–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –∫—É—Ö–Ω—è': '0', '–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É –≤–æ–¥—ã': '3', '–±–∏–ª—å—è—Ä–¥': '3', '—Å—É—à–∏ –∏ —Ä–æ–ª–ª—ã': '1', '—É–∑–±–µ–∫—Å–∫–∞—è –µ–¥–∞': '1', '–∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–±–µ–¥—ã': '1', '–≥—Ä—É–∑–∏–Ω—Å–∫–∞—è –µ–¥–∞': '1', '–ø–∏—Ü—Ü–∞': '1', '–º–æ–∂–Ω–æ —Å –Ω–æ—É—Ç–±—É–∫–æ–º': '0', '—Å–ª–∞–¥–æ—Å—Ç–∏': '1', '–∑–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ': '1', '–æ—Å–µ—Ç–∏–Ω—Å–∫–∏–µ –ø–∏—Ä–æ–≥–∏': '1', '–∫–∏—Ç–∞–π—Å–∫–∞—è –µ–¥–∞': '1' }

        //         newTags = newTags.sort((a, b) => parseInt(weights[b]) - parseInt(weights[a]))
        //     }
        // }
        // else {
        var newTags = tags

        let weights = { '–î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã': '0', '–ï–¥–∞ –Ω–∞–≤—ã–Ω–æ—Å': '1', '–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π': '0', '–õ–µ—Ç–Ω—è—è –≤–µ—Ä–∞–Ω–¥–∞': '4', 'Wi-Fi': '0', '–ö–æ—Ñ–µ —Å —Å–æ–±–æ–π': '2', '–ö—Ä–∞—Ñ—Ç–æ–≤–æ–µ –ø–∏–≤–æ': '2', '–ü—Ä–µ–¥–∑–∞–∫–∞–∑ –æ–Ω–ª–∞–π–Ω': '0', '–ë–∏–∑–Ω–µ—Å-–ª–∞–Ω—á': '1', '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç': '0', '–ó–∞–≤—Ç—Ä–∞–∫': '2', '–ü—Ä–æ–µ–∫—Ç–æ—Ä': '3', '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': '3', '–î–µ—Ç—Å–∫–æ–µ –º–µ–Ω—é': '1', '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏': '4', '–ü–∞—Ä–∫–æ–≤–∫–∞ –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '0', '–î–µ—Ç—Å–∫–∞—è –∫–æ–º–Ω–∞—Ç–∞': '1', '–°–∞–º–æ–≤—ã–≤–æ–∑': '0', '–î–æ—Å—Ç–∞–≤–∫–∞': '0', '–õ–∏—Ñ—Ç': '0', '–¢–∞–Ω—Ü–ø–æ–ª': '4', '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–≤–µ—Ä—å': '0', '–¢—É–∞–ª–µ—Ç –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '0', '–ö–∞—Ä–∞–æ–∫–µ': '4', '–ü–∞–Ω–¥—É—Å': '0', '–ó–∞—Ä—è–¥–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞': '0', 'WC': '0', '–ü–∏—Ç—å–µ–≤–∞—è –≤–æ–¥–∞': '0', '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞': '0', '–û–ø–ª–∞—Ç–∞ —Å—á–µ—Ç–∞ –ø–æ QR-–∫–æ–¥—É': '0', '–ß–∞–π': '1', '–§—É–¥–∫–æ—Ä—Ç': '0', '–ë–∏–ª—å—è—Ä–¥': '3', '–°–∫–∏–¥–∫–∞ –Ω–∞ –µ–¥—É': '0', '–ò–∫–æ—Ä–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω': '0', '–ö–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞': '0', '–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤': '0', '–ü–∞—Ä–∫–æ–≤–∫–∞': '0', '–®–æ—É-–ø—Ä–æ–≥—Ä–∞–º–º–∞': '4', '–§–µ–π—Å-–∫–æ–Ω—Ç—Ä–æ–ª—å': '0', '–†–µ—Å—Ç–æ—Ä–∞–Ω': '1', '–ú–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞': '3', '–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å': '0', '–õ—å–≥–æ—Ç–Ω—ã–µ –±–∏–ª–µ—Ç—ã': '0', '–•–ª–µ–± –∏–∑ —Ç–∞–Ω–¥—ã—Ä–∞': '0', '–ß–∞–π–Ω–∞—è': '1', '–ü–µ—á–∞—Ç—å –Ω–∞ —Ç–æ—Ä—Ç–∞—Ö': '0', '–ë–∞—Ä–Ω–∞—è —Å—Ç–æ–π–∫–∞': '2', '–í–∏–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞': '1', '–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥ –±–∞–Ω–∫–µ—Ç': '0', '–ö—É–ª–∏–Ω–∞—Ä–∏—è': '0', '–ú–µ–Ω—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º': '1', 'DJ': '4', '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞': '0', '–°–≤–æ—è –ø–µ–∫–∞—Ä–Ω—è': '2', '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': '3', '–ú–æ–∂–Ω–æ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏': '1', '–ñ–∏–≤–∞—è –º—É–∑—ã–∫–∞': '4', '–£—Å—Ç—Ä–∏—á–Ω—ã–π –±–∞—Ä': '1', '–ë—Ä–∞–Ω—á–∏': '2', '–î–µ—Ç—Å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è': '0', '–¢–∞–Ω—Ü–ø–æ–ª': '4', '–ì—Ä–∏–ª—å': '1', '–î–æ–º–∞—à–Ω—è—è –µ–¥–∞': '1', '–í—ã–ø–µ—á–∫–∞': '1', '–®–∞—à–ª—ã–∫–∏': '1', '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –∫—É—Ö–Ω—è': '0', '–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É –≤–æ–¥—ã': '3', '–ë–∏–ª—å—è—Ä–¥': '3', '–°—É—à–∏ –∏ —Ä–æ–ª–ª—ã': '1', '–£–∑–±–µ–∫—Å–∫–∞—è –µ–¥–∞': '1', '–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–±–µ–¥—ã': '1', '–ì—Ä—É–∑–∏–Ω—Å–∫–∞—è –µ–¥–∞': '1', '–ü–∏—Ü—Ü–∞': '1', '–ú–æ–∂–Ω–æ —Å –Ω–æ—É—Ç–±—É–∫–æ–º': '0', '–°–ª–∞–¥–æ—Å—Ç–∏': '1', '–ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ': '1', '–û—Å–µ—Ç–∏–Ω—Å–∫–∏–µ –ø–∏—Ä–æ–≥–∏': '1', '–ö–∏—Ç–∞–π—Å–∫–∞—è –µ–¥–∞': '1' }

        newTags = newTags.sort((a, b) => parseInt(weights[b['name']]) - parseInt(weights[a['name']]))
        // }

        const emojis = { '–î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã': 'üöö', '–ï–¥–∞ –Ω–∞–≤—ã–Ω–æ—Å': 'ü•°', '–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π': 'üí≥', '–õ–µ—Ç–Ω—è—è –≤–µ—Ä–∞–Ω–¥–∞': 'üåÖ', 'Wi-Fi': 'üåê', '–ö–æ—Ñ–µ —Å —Å–æ–±–æ–π': '‚òï', '–ö—Ä–∞—Ñ—Ç–æ–≤–æ–µ –ø–∏–≤–æ': 'üç∫', '–ü—Ä–µ–¥–∑–∞–∫–∞–∑ –æ–Ω–ª–∞–π–Ω': 'üåê', '–ë–∏–∑–Ω–µ—Å-–ª–∞–Ω—á': 'üï¥üèøüï¥üèª', '–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç': 'üìÉ', '–ó–∞–≤—Ç—Ä–∞–∫': 'üç≥', '–ü—Ä–æ–µ–∫—Ç–æ—Ä': 'üìΩ', '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': 'üé≤', '–î–µ—Ç—Å–∫–æ–µ –º–µ–Ω—é': 'üë∂üèª', '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏': '‚öΩ', '–ü–∞—Ä–∫–æ–≤–∫–∞ –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '‚ôø', '–î–µ—Ç—Å–∫–∞—è –∫–æ–º–Ω–∞—Ç–∞': 'üë∂üèª', '–°–∞–º–æ–≤—ã–≤–æ–∑': 'üö∂‚Äç‚ôÇ', '–î–æ—Å—Ç–∞–≤–∫–∞': 'üöö', '–õ–∏—Ñ—Ç': '‚ôø', '–¢–∞–Ω—Ü–ø–æ–ª': 'üï∫üèæ', '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–≤–µ—Ä—å': '‚ôø', '–¢—É–∞–ª–µ—Ç –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é': '‚ôø', '–ö–∞—Ä–∞–æ–∫–µ': 'üé§', '–ü–∞–Ω–¥—É—Å': '‚ôø', '–ó–∞—Ä—è–¥–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞': 'üì≥', 'WC': 'üöæ', '–ü–∏—Ç—å–µ–≤–∞—è –≤–æ–¥–∞': 'ü•õ', '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞': 'üÜì', '–û–ø–ª–∞—Ç–∞ —Å—á–µ—Ç–∞ –ø–æ QR-–∫–æ–¥—É': 'üì≤', '–ß–∞–π': '‚òï', '–§—É–¥–∫–æ—Ä—Ç': 'ü™î', '–ë–∏–ª—å—è—Ä–¥': 'üé±', '–°–∫–∏–¥–∫–∞ –Ω–∞ –µ–¥—É': 'üí∏', '–ò–∫–æ—Ä–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω': 'üü†', '–ö–Ω–æ–ø–∫–∞ –≤—ã–∑–æ–≤–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞': '‚ôø', '–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤': 'üöö', '–ü–∞—Ä–∫–æ–≤–∫–∞': 'üÖø', '–®–æ—É-–ø—Ä–æ–≥—Ä–∞–º–º–∞': 'üíÉüèº', '–§–µ–π—Å-–∫–æ–Ω—Ç—Ä–æ–ª—å': 'üíÇ‚Äç‚ôÇ', '–†–µ—Å—Ç–æ—Ä–∞–Ω': 'üç¥', '–ú–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞': 'üèñ', '–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å': 'üìù', '–õ—å–≥–æ—Ç–Ω—ã–µ –±–∏–ª–µ—Ç—ã': 'üëµ', '–•–ª–µ–± –∏–∑ —Ç–∞–Ω–¥—ã—Ä–∞': 'üçû', '–ß–∞–π–Ω–∞—è': '‚òï', '–ü–µ—á–∞—Ç—å –Ω–∞ —Ç–æ—Ä—Ç–∞—Ö': 'üéÇ', '–ë–∞—Ä–Ω–∞—è —Å—Ç–æ–π–∫–∞': 'üç∏', '–í–∏–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞': 'üç∑', '–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥ –±–∞–Ω–∫–µ—Ç': 'ü•Ç', '–ö—É–ª–∏–Ω–∞—Ä–∏—è': 'üçΩ', '–ú–µ–Ω—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º': 'üá¨üáß', 'DJ': 'üéß', '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–∞—Ä–∫–æ–≤–∫–∞': 'üÖø', '–°–≤–æ—è –ø–µ–∫–∞—Ä–Ω—è': 'ü•ê', '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã': 'üß©', '–ú–æ–∂–Ω–æ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏': 'üêà', '–ñ–∏–≤–∞—è –º—É–∑—ã–∫–∞': 'üé∑', '–£—Å—Ç—Ä–∏—á–Ω—ã–π –±–∞—Ä': 'ü¶™', '–ë—Ä–∞–Ω—á–∏': 'üßá', '–î–µ—Ç—Å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è': 'üë∂', '—Ç–∞–Ω—Ü–ø–æ–ª': 'üï∫üèæ', '–ì—Ä–∏–ª—å': 'ü•ì', '–î–æ–º–∞—à–Ω—è—è –µ–¥–∞': 'ü•ó', '–í—ã–ø–µ—á–∫–∞': 'ü•ê', '–®–∞—à–ª—ã–∫–∏': 'üçñ', '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è –∫—É—Ö–Ω—è': 'üè™', '–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É –≤–æ–¥—ã': 'üåä', '–ë–∏–ª—å—è—Ä–¥': 'üé±', '–°—É—à–∏ –∏ —Ä–æ–ª–ª—ã': 'üç£', '–£–∑–±–µ–∫—Å–∫–∞—è –µ–¥–∞': 'üá∫üáø', '–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–±–µ–¥—ã': 'üç¥', '–ì—Ä—É–∑–∏–Ω—Å–∫–∞—è –µ–¥–∞': 'üá¨üá™', '–ü–∏—Ü—Ü–∞': 'üçï', '–ú–æ–∂–Ω–æ —Å –Ω–æ—É—Ç–±—É–∫–æ–º': 'üíª', '–°–ª–∞–¥–æ—Å—Ç–∏': 'üç≠', '–ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ': 'ü•ó', '–û—Å–µ—Ç–∏–Ω—Å–∫–∏–µ –ø–∏—Ä–æ–≥–∏': 'ü•ß', '–ö–∏—Ç–∞–π—Å–∫–∞—è –µ–¥–∞': 'üá®üá≥ü•°' }

        const renderTags = ({ item }) => {
            if (item < newTags.length)
            if (emojis[newTags[item]] != '') {
                return (
                    <div className='tag'><h3>{emojis[newTags[item]["name"]]} {newTags[item]["name"].charAt(0).toUpperCase() + newTags[item]["name"].slice(1)}</h3></div>
                )
            }
        }

        const renderTags2 = ({ item }) => {
            if (item === 1 && cusine !== undefined) {

                function handleCusine() {
                    if (cusine.length != 1){
                        if (cusineNum == cusine.length - 1) setCusineNum(0)
                        else setCusineNum(cusineNum + 1)
                    }
                    else setCusineNum(0)
                }
                if (cusine[cusineNum] == undefined && cusine.length != 0) setCusineNum(0);
                // console.log('bruhhh',  cusine, cusineNum)
                const kuhnya = cusine[0] == '–Ω–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏' ? '—Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è' : cusine[cusineNum]
                if (cusine[cusineNum] != undefined)
                return (
                    <div disabled={cusine.length == 1} onClick={() => handleCusine()}><div className='tag'><h3>{cusineTypes[cusine[cusineNum]]}  {kuhnya.charAt(0).toUpperCase() + kuhnya.slice(1)} –∫—É—Ö–Ω—è</h3></div></div>
                )
            }
            else {
                function handleBillNum() {
                    if (billNum == 4) setBillNum(0)
                    else {
                        let newBill = billNum;
                        let flag = false;
                        while (newBill< 4) {
                            newBill += 1
                            if (Object.keys(features).includes(Object.keys(interactiveBill)[newBill])){
                                flag = true;
                                break;
                            }
                        }
                        if (flag) setBillNum(newBill);
                        else setBillNum(0);
                    }
                }
                if (Object.keys(features).filter(element => Object.keys(interactiveBill).includes(element)).length > 0){
                    if (Object.keys(features).includes(Object.keys(interactiveBill)[billNum]))
                    return(<div onClick={() => handleBillNum()}><div className='tag'><h3>{Object.values(interactiveBill)[billNum]} {features[Object.keys(interactiveBill)[billNum]][0]}</h3></div></div>)
                    else handleBillNum();
                } 
            }
        }

        const imageLinks = [photos["–í–Ω—É—Ç—Ä–∏"][0], photos["–í–Ω—É—Ç—Ä–∏"][1], photos["–í–Ω—É—Ç—Ä–∏"][2]]
        const settings = {
            dots: false,
            infinite: true,
            speed: 500,
            slidesToShow: 1,
            slidesToScroll: 1,
            autoplay: false,
            autoplaySpeed: 3000,
            arrows: false
        };

        return (
            <div className="preview">
                <div>
                    <Modal
                        aria-labelledby="unstyled-modal-title"
                        aria-describedby="unstyled-modal-description"
                        open={open}
                        onClose={handleClose}
                        //slots={{ backdrop: StyledBackdrop }}
                    >
                        <ModalContent sx={style}>
                            {modalType !== '' ?
                            <Stories typ={modalType} pho={photos} func={handleClose}/>
                            : <div/>}
                        {/* <h3 id="unstyled-modal-title" className="modal-title">
                            {modalType}
                        </h3>
                        <p id="unstyled-modal-description" className="modal-description">
                            Aliquid amet deserunt earum!
                        </p> */}
                        </ModalContent>
                    </Modal>
                </div>

                {photos !== undefined ?
                <Slider {...settings}>
                    {photos['covers'].map((link, index) => (
                        <div key={index}>
                        <img src={link} alt={`Slide ${index}`} />
                        </div>
                    ))}
                </Slider> : <div/> }

                <h1>{name}</h1>
                <h2>{descr}</h2>
                <div className='tag-container'>
                    {renderTags({ item: 0 })}
                    {renderTags({ item: 1 })}
                    {renderTags({ item: 2 })}
                {/* </div>
                <div className='tag-container'> */}
                    {renderTags2({item: 0})}
                    {renderTags2({item: 1})}
                    <a target='_blank' href={link}><div className='tag'><h3>üìç {adress}</h3></div></a>
                </div>

                <div className='stories-container'>
                    {Object.keys(photos).map(key => {
                        if (key !== '–í—Å–µ' && key !== '–í–∏–¥–µ–æ')
                        return(
                            <div className='story'>
                                <img onClick={() => handleOpen(key)} src={photos[key][0]}/>
                                <h3>{key}</h3>
                            </div>
                        )
                    })}
                </div>

                <div className='event-conteiner'>
                    {events !== undefined ? events.map(key => {
                        return(
                            <div className='event'>
                                <img src={ key["photos"][0] }/>
                                <h3 className='event-name' >{key["name"]}</h3>
                                <h3 className='event-description'>{key["description"]}</h3>
                                <div className='buttons'>
<                                   div className='event-price'>{key["entry_price"]} ‚ÇΩ</div>
                                    <div className='event-time'>{key["date_time_start"]} - {key["date_time_end"]}</div>
                                </div>
                                
                            </div>
                        )
                    }) : <div/>}
                    
                </div>
                <div className='empty-div'></div>
            </div>
        );
    }
}

const style = {
    width: '450px',
    padding: '0px',
    outline: '0px',
    border: '0px'
};

const grey = {
    50: '#F3F6F9',
    100: '#E5EAF2',
    200: '#DAE2ED',
    300: '#C7D0DD',
    400: '#B0B8C4',
    500: '#9DA8B7',
    600: '#6B7A90',
    700: '#434D5B',
    800: '#303740',
    900: '#1C2025',
};

const blue = {
    200: '#99CCFF',
    300: '#66B2FF',
    400: '#3399FF',
    500: '#007FFF',
    600: '#0072E5',
    700: '#0066CC',
};


const Modal = styled(BaseModal)`
  position: fixed;
  z-index: 1300;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
`;

const ModalContent = styled(Box)(
    ({ theme }) => `
    display: flex;
    flex-direction: column;
    gap: 8px;
    overflow: hidden;
    height: 100vh;
    width: 450px;
    background-color: ${theme.palette.mode === 'dark' ? grey[900] : '#FFF'};
    border-radius: 8px;
    border: 1px solid ${theme.palette.mode === 'dark' ? grey[700] : grey[200]};
    box-shadow: 0px 4px 12px ${
      theme.palette.mode === 'dark' ? 'rgba(0,0,0, 0.50)' : 'rgba(0,0,0, 0.20)'
    };
    padding: 1rem;
    color: ${theme.palette.mode === 'dark' ? grey[50] : grey[900]};
    font-family: IBM Plex Sans, sans-serif;
    font-weight: 500;
    text-align: start;
    position: relative;
  
  
    & .modal-title {
      margin: 0;
      line-height: 1.5rem;
      margin-right: 0.5rem;
    }
  
    & .modal-description {
      margin: 0;
      line-height: 1.5rem;
      font-weight: 400;
      color: ${theme.palette.mode === 'dark' ? grey[400] : grey[800]};
    }
    `,
);
  

const TriggerButton = styled('button')(
    ({ theme }) => `
    font-family: IBM Plex Sans, sans-serif;
    font-weight: 600;
    font-size: 0.875rem;
    line-height: 1.5;
    padding: 8px 16px;
    border-radius: 8px;
    color: white;
    transition: all 150ms ease;
    cursor: pointer;
    background: ${theme.palette.mode === 'dark' ? grey[900] : '#fff'};
    border: 1px solid ${theme.palette.mode === 'dark' ? grey[700] : grey[200]};
    color: ${theme.palette.mode === 'dark' ? grey[200] : grey[900]};
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  
    &:hover {
      background: ${theme.palette.mode === 'dark' ? grey[800] : grey[50]};
      border-color: ${theme.palette.mode === 'dark' ? grey[600] : grey[300]};
    }
  
    &:active {
      background: ${theme.palette.mode === 'dark' ? grey[700] : grey[100]};
    }
  
    &:focus-visible {
      box-shadow: 0 0 0 4px ${theme.palette.mode === 'dark' ? blue[300] : blue[200]};
      outline: none;
    }
  `,
);

export default Preview;
